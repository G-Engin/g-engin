<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Tutorial 1</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script><script language=JavaScript src="../../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Tutorial_1"></a>Tutorial 1</h1><div class=CBody><h4 class=CHeading>Introduction</h4><p>This is a basic G-Engin tutorial, we will learn simple things: Opening a display window, and drawing a picture (sprite).</p><h4 class=CHeading>Coding</h4><p>First, we declare some usefull globals, and set some options:</p><blockquote><pre>Global $scrW = 400, $scrH = 300
Global $x, $y

; This is to get mouse position relatively to the window, not to the screen (by default)
Opt(&quot;MouseCoordMode&quot;, 2)

; To use _IsPressed
#Include &lt;misc.au3&gt;</pre></blockquote><p>Now, we include the single G-Engin header</p><blockquote><pre>#Include &quot;gengin.au3&quot;</pre></blockquote><p>Let&rsquo;s start now!</p><p>We open a window with title: &ldquo;G-Engin Tuto 1&rdquo; and dimensions of 400 x 300 (width x height)</p><blockquote><pre>_GEng_Start(&quot;G-Engin Tuto 1&quot;, 400, 300)</pre></blockquote><p>We load a picture file into an Image object ($img_Gimp) with size 256x256.&nbsp; It&rsquo;s better to change image size here, when loading it, than changin it when displaying it with a Sprite</p><blockquote><pre>$img_Gimp = _GEng_ImageLoad(&quot;res\gengin.png&quot;, 256, 256)</pre></blockquote><p>Now, let&rsquo;s create a Sprite object ($spr_Gimp)</p><blockquote><pre>$spr_Gimp = _GEng_Sprite_Create()</pre></blockquote><p>For now, the sprite object is empty: it doesn&rsquo;t contains  any image.</p><p>So, we must assign an image to our sprite</p><blockquote><pre>_GEng_Sprite_ImageSet($spr_Gimp, $img_Gimp)</pre></blockquote><p>When doing this, the sprite also takes the size of the assigned image</p><blockquote><pre>_GEng_Sprite_SizeGet($spr_Gimp, $x, $y)
ConsoleWrite(&quot;Sprite's size: &quot; &amp; $x &amp; &quot;x&quot; &amp; $y &amp; @CRLF)</pre></blockquote><p>We should se: 256x256</p><p>Next, we set the origin point of our sprite.&nbsp; This is the positioning point, and the center pivot when rotating the sprite.</p><p>We use a simplified function</p><blockquote><pre>_GEng_Sprite_OriginSetEx($spr_Gimp, $GEng_Origin_Mid)</pre></blockquote><p>This set the origin at the middle of the sprite.</p><p>We could use this</p><blockquote><pre>_GEng_Sprite_OriginSet($spr_Gimp, 128, 128)</pre></blockquote><p>but imagine that the sprite size was unknown!</p><p>We now position the sprite at the center of the screen</p><blockquote><pre>_GEng_Sprite_PosSet($spr_Gimp, $scrW / 2, $scrH / 2)</pre></blockquote><p>So, at this point, nothing is displayed yet, to do it, we must</p><ul><li>Clear the screen</li><li>Draw our sprite(s)</li><li>Refresh the screen Let&rsquo;s do it!</li></ul><blockquote><pre>MsgBox(0, &quot;GEngin&quot;, &quot;Nothing displayed!&quot;)
_GEng_ScrFlush(0xFFFFFFFF) ; clear the screen
_GEng_Sprite_Draw($spr_Gimp) ; draw the sprite
_GEng_ScrUpdate() ; refresh the screen
MsgBox(0, &quot;GEngin&quot;, &quot;Sprite displayed at the center of the screen!&quot;)</pre></blockquote><p>So, let&rsquo;s build our program&rsquo;s main loop</p><blockquote><pre>MsgBox(0, &quot;GEngin&quot;, &quot;Click OK to enter the main loop.&quot; &amp; @CRLF &amp; _
                       &quot;- Left click to move the sprite&quot; &amp; @CRLD &amp; _
                       &quot;- Right click to change sprites angle&quot;)
Global $tmp
Do
   _GEng_ScrFlush(0xFFFFFFFF)
   ; ---
   If _IsPressed('01') Then
       $tmp = MouseGetPos()
       _GEng_Sprite_PosSet($spr_Gimp, $tmp[0], $tmp[1]) ; changin sprite's position
   EndIf
   If _IsPressed('02') Then
       _GEng_Sprite_AngleAdd($spr_Gimp, 30) ; changing sprite's angle
   EndIf
   ; ---
   _GEng_Sprite_Draw($spr_Gimp)
   ; ---
   _GEng_ScrUpdate()
Until GuiGetMsg() = -3 ; $GUI_EVENT_CLOSE</pre></blockquote><p>When the loop exits, we free the ressources and we&rsquo;re done!</p><blockquote><pre>_GEng_Shutdown()</pre></blockquote><h4 class=CHeading>Complete code</h4><blockquote><pre>Global $scrW = 400, $scrH = 300
Global $x, $y

Opt(&quot;MouseCoordMode&quot;, 2)

#Include &lt;misc.au3&gt;
#Include &quot;gengin.au3&quot;

_GEng_Start(&quot;G-Engin Tuto 1&quot;, 400, 300)

$img_Gimp = _GEng_ImageLoad(&quot;res\gengin.png&quot;, 256, 256)

$spr_Gimp = _GEng_Sprite_Create()

_GEng_Sprite_ImageSet($spr_Gimp, $img_Gimp)

_GEng_Sprite_SizeGet($spr_Gimp, $x, $y)
ConsoleWrite(&quot;Sprite's size: &quot; &amp; $x &amp; &quot;x&quot; &amp; $y &amp; @CRLF)

_GEng_Sprite_OriginSetEx($spr_Gimp, $GEng_Origin_Mid)
;_GEng_Sprite_OriginSet($spr_Gimp, 128, 128)

_GEng_Sprite_PosSet($spr_Gimp, $scrW / 2, $scrH / 2)

MsgBox(0, &quot;GEngin&quot;, &quot;Nothing displayed!&quot;)
_GEng_ScrFlush(0xFFFFFFFF) ; clear the screen
_GEng_Sprite_Draw($spr_Gimp) ; draw the sprite
_GEng_ScrUpdate() ; refresh the screen
MsgBox(0, &quot;GEngin&quot;, &quot;Sprite displayed at the center of the screen!&quot;)

MsgBox(0, &quot;GEngin&quot;, &quot;Click OK to enter the main loop.&quot; &amp; @CRLF &amp; _
                        &quot;- Left click to move the sprite&quot; &amp; @CRLD &amp; _
                        &quot;- Right click to change sprites angle&quot;)
Global $tmp
Do
    _GEng_ScrFlush(0xFFFFFFFF)
    ; ---
    If _IsPressed('01') Then
        $tmp = MouseGetPos()
        _GEng_Sprite_PosSet($spr_Gimp, $tmp[0], $tmp[1]) ; changin sprite's position
    EndIf
    If _IsPressed('02') Then
        _GEng_Sprite_AngleAdd($spr_Gimp, 30) ; changing sprite's angle
    EndIf
    ; ---
    _GEng_Sprite_Draw($spr_Gimp)
    ; ---
    _GEng_ScrUpdate()
Until GuiGetMsg() = -3 ; $GUI_EVENT_CLOSE

_GEng_Shutdown()</pre></blockquote></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile><a href="INDEX-au3.html">Home</a></div></div><div class=MEntry><div class=MFile><a href="CREDIT-au3.html">Credits</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Tutorials</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MFile id=MSelected>Tutorial 1</div></div><div class=MEntry><div class=MFile><a href="Tuto2-au3.html">Tutorial 2 - Incomplete</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent4')">Documentation</a><div class=MGroupContent id=MGroupContent4><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent2')">System</a><div class=MGroupContent id=MGroupContent2><div class=MEntry><div class=MFile><a href="../GEng_System-au3.html">System</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Draw-au3.html">Screen</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../GEng_Image-au3.html">Images</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent3')">Sprite</a><div class=MGroupContent id=MGroupContent3><div class=MEntry><div class=MFile><a href="../GEng_Sprite-au3.html">Creation</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Sprite_Get-au3.html">Get Parameters</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Sprite_Set-au3.html">Set Parameters</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Sprite_Animation-au3.html">Animation</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Sprite_Collision-au3.html">Collisions</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Sprite_Append-au3.html">Appended Info</a></div></div></div></div></div><div class=MEntry><div class=MFile><a href="../GEng_Animation-au3.html">Animation</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Geometry-au3.html">Geometry functions</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Text-au3.html">Text</a></div></div><div class=MEntry><div class=MFile><a href="../GEng_Sound-au3.html">Sound</a></div></div></div></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent5')">Index</a><div class=MGroupContent id=MGroupContent5><div class=MEntry><div class=MIndex><a href="../../../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Files.html">Files</a></div></div><div class=MEntry><div class=MIndex><a href="../../../index/Functions.html">Functions</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Files">Files</option><option value="Functions">Functions</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>